!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.pmz=t()}}(function(){return function t(n,e,r){function o(a,s){if(!e[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return o(e?e:t)},c,c.exports,t,n,e,r)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,n,e){"use strict";var r=t("./model/model");e.PmzModel=r.PmzModel;var o=t("./storage/model-file");e.PmzFile=o.PmzFile},{"./model/model":5,"./storage/model-file":14}],2:[function(t,n,e){"use strict";function r(t,n){return void 0===n&&(n=10),t&&t.length?(t=t.trim(),"?"===t?null:"-1"===t?-1:parseInt(t,n)):null}function o(t){return t?t.split(",").map(function(t){return"?"===t?null:t}):[]}function i(t){return o(t).map(function(t){return t?parseInt(t):null})}function a(t){return o(t).map(function(t){return t?parseFloat(t):null})}e.asInt=r,e.asArray=o,e.asIntArray=i,e.asFloatArray=a},{}],3:[function(t,n,e){"use strict";var r=t("./base"),o=function(){function t(t){this.c=t}return t.parse=function(n){return new t(r.asInt(n,16))},t.prototype.toString=function(){return null===this.c?"":-1===this.c?"-1":this.c.toString(16).toUpperCase()},t}();e.PmzColor=o},{"./base":2}],4:[function(t,n,e){"use strict";var r=function(){function t(t,n,e,r,o,i,a){this.name=t,this.cityName=n,this.countryName=e,this.version=r,this.description=o,this.comment=i,this.delays=a}return t}();e.PmzMetadata=r},{}],5:[function(t,n,e){"use strict";var r=t("./metadata"),o=t("./transport"),i=t("./scheme"),a=function(){function t(t){this.metadata=t,this.transports=[],this.schemes=[]}return t.create=function(){var n=new t(new r.PmzMetadata("Unknown",null,null,"1.0.0",null,null,null));return n.addTransport("Metro.trp",o.PmzTransportType.Metro),n.addScheme("Metro.map"),n},t.prototype.getMetadata=function(){return this.metadata},t.prototype.getSchemes=function(){return this.schemes.map(function(t){return t.name})},t.prototype.addScheme=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=null),this.schemes.push(new i.PmzScheme(t,t,n||{},e||[]))},t.prototype.removeScheme=function(t){this.schemes.splice(this.schemes.indexOf(this.getScheme(t)))},t.prototype.getScheme=function(t){var n=this.schemes.filter(function(n){return n.name===t});if(n)return n[0];throw new Error("Scheme "+t+" not found")},t.prototype.getTransports=function(){return this.transports.map(function(t){return t.name})},t.prototype.addTransport=function(t,n,e,r){void 0===e&&(e=null),void 0===r&&(r=null),this.transports.push(new o.PmzTransport(t,t,n,e||{},r||{}))},t.prototype.removeTransport=function(t){this.transports.splice(this.transports.indexOf(this.getTransport(t)))},t.prototype.getTransport=function(t){var n=this.transports.filter(function(n){return n.name===t});if(n)return n[0];throw new Error("Transport "+t+" not found")},t}();e.PmzModel=a},{"./metadata":4,"./scheme":9,"./transport":11}],6:[function(t,n,e){"use strict";var r=t("./base"),o=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.isEmpty=function(){return 0===this.x&&0===this.y},t.parse=function(n){var e=r.asIntArray(n);return new t(e[0],e[1])},t.parseArray=function(n){for(var e=r.asIntArray(n),o=[],i=0;i<e.length-1;i+=2)o.push(new t(e[i],e[i+1]));return o},t.format=function(t){return[t.x,t.y].join(",")},t.formatArray=function(n){return n.map(t.format).join(", ")},t}();e.PmzPoint=o},{"./base":2}],7:[function(t,n,e){"use strict";var r=t("./base"),o=function(){function t(t,n,e,r){this.x=t,this.y=n,this.width=e,this.height=r}return t.prototype.isEmpty=function(){return 0===this.x&&0===this.y&&0===this.width&&0===this.height},t.parse=function(n){var e=r.asIntArray(n);return new t(e[0],e[1],e[2],e[3])},t.parseArray=function(n){for(var e=r.asIntArray(n),o=[],i=0;i<e.length-3;i+=2)o.push(new t(e[i],e[i+1],e[i+2],e[i+3]));return o},t.format=function(t){return[t.x,t.y,t.width,t.height].join(",")},t.formatArray=function(n){return n.map(t.format).join(", ")},t}();e.PmzRect=o},{"./base":2}],8:[function(t,n,e){"use strict";var r=function(){function t(t,n,e,r,o,i,a,s,u,f,c,l){this.id=t,this.name=n,this.color=e,this.labelColor=r,this.labelBackgroundColor=o,this.coords=i,this.rects=a,this.heights=s,this.rect=u,this.rects2=f,this.splines=c,this.visible=l}return t}();e.PmzSchemeLine=r},{}],9:[function(t,n,e){"use strict";var r=function(){function t(t,n,e,r){this.id=t,this.name=n,this.options=e,this.lines=r}return t.prototype.toString=function(){return"[object Scheme "+this.id+":"+this.name+"]"},t}();e.PmzScheme=r},{}],10:[function(t,n,e){"use strict";var r=t("./base"),o=t("./point"),i=function(){function t(t,n,e,r,o){return this.line=t,this.src=n,this.dst=e,this.points=r,this.isSmooth=o,this}return t.parse=function(n){for(var e=r.asArray(n),i=e[0],a=e[1],s=e[2],u=e.length%2===0,f=[],c=3;c<e.length-1;c+=2)f.push(new o.PmzPoint(parseInt(e[c]),parseInt(e[c+1])));return new t(i,a,s,f,u)},t.format=function(t){return[t.line,t.src,t.dst,o.PmzPoint.formatArray(t.points),t.isSmooth].join(",")},t}();e.PmzSpline=i},{"./base":2,"./point":6}],11:[function(t,n,e){"use strict";!function(t){t[t.Metro=0]="Metro",t[t.Bus=1]="Bus"}(e.PmzTransportType||(e.PmzTransportType={}));var r=(e.PmzTransportType,function(){function t(t,n,e,r,o){this.id=t,this.name=n,this.type=e,this.lines=r,this.transfers=o}return t}());e.PmzTransport=r},{}],12:[function(t,n,e){"use strict";function r(t){var n=[];return Object.keys(t).forEach(function(e){n.push("["+e+"]"),Object.keys(t[e]).forEach(function(r){var o=t[e][r];if(o instanceof Array)for(var i=0;i<o.length;i++)n.push(r+"="+o[i]);else n.push(r+"="+o)})}),n.reduce(function(t,n){return t+"\n"+n})}function o(t){var n={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},e={},r=t.split(/\r\n|\r|\n/),o=null;return r.forEach(function(t){if(!n.comment.test(t))if(n.param.test(t)){var r=t.match(n.param);if(o){var i=e[o][r[1]];i?"string"==typeof i?e[o][r[1]]=[i,r[2]]:e[o][r[1]].push(r[2]):e[o][r[1]]=r[2]}else e[r[1]]=r[2]}else if(n.section.test(t)){var r=t.match(n.section);e[r[1]]={},o=r[1]}else 0==t.length&&o&&(o=null)}),e}e.formatIniText=r,e.parseIniText=o},{}],13:[function(t,n,e){"use strict";function r(t){var n=t.Options,e=(n.DelayNames||"").split("\n");return new i.PmzMetadata(n.Name,n.CityName,n.Country,n.NeedVersion,n.MapAuthors.reduce(function(t,n){return t+"\n"+n}),n.Comment,e)}function o(t){var n={Options:{Name:t.name,CityName:t.cityName||"Unknown",Country:t.countryName||"Unknown",NeedVersion:t.version||"1.0.0",MapAuthors:(t.description||"").split("\n")}};return t.comment&&(n.Options.Comment=t.comment),t.delays&&(n.Options.DelayNames=t.delays.reduce(function(t,n){return t+","+n})),n}var i=t("../model/metadata");e.load=r,e.save=o},{"../model/metadata":4}],14:[function(t,n,e){(function(n){"use strict";function r(t,n){return t?-1!==t.indexOf(n,t.length-n.length):!1}function o(t,n,e){for(var o in t.files){var i=t.files[o];if(r(o,n)&&e(o,i))return}}function i(t,n,e){o(t,n,function(t,n){return e(t,p.parseIniText(u.decodeWindows1251(n.asUint8Array())))})}function a(t){if(-1==["application/x-zip-compressed","application/zip"].indexOf(t.type))throw new TypeError("Invalid file type "+t.type+" for PMZ map");var n=new s(t.content);return o(n,".pmz",function(t,e){return n=new s(e.asArrayBuffer()),!0}),n}var s="undefined"!=typeof window?window.JSZip:"undefined"!=typeof n?n.JSZip:null,u=t("./utils"),f=t("./metadata-file"),c=t("./transport-file"),l=t("./scheme-file"),p=t("./ini-file"),m=t("../model/model"),d=function(){function t(){}return t.load=function(t){var n=a(t),e=null;if(i(n,".cty",function(t,n){e=new m.PmzModel(f.load(n))}),!e)throw new TypeError("Invalid file format");return i(n,".trp",function(t,n){var r=c.load(n,t,e.getMetadata());e.addTransport(r.name,r.options,r.lines,r.transfers)}),i(n,".map",function(t,n){var r=l.load(n,t,e);e.addScheme(r.name,r.options,r.lines)}),e},t.save=function(t,n){var e=a(t),r=f.save(n.metadata),o=p.formatIniText(r),i=u.encodeWindows1251(o);e.file(n.metadata.name+".cty",i),t.content=e.generate({type:"arraybuffer"})},t}();e.PmzFile=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/model":5,"./ini-file":12,"./metadata-file":13,"./scheme-file":15,"./transport-file":16,"./utils":17}],15:[function(t,n,e){"use strict";function r(t){return t?{imageFileName:t.ImageFileName,stationDiameter:t.StationDiameter,lineWidth:t.LinesWidth,upperCase:t.UpperCase,wordWrap:t.WordWrap,isVector:t.IsVector,transports:h.asArray(t.Transports),checkedTransports:h.asArray(t.CheckedTransports)}:{}}function o(t){if(!t)return{};var n={};for(var e in t){var r=t[e],o=p.PmzSpline.parse(r);n[o.line]||(n[o.line]=[]),n[o.line].push(o)}return n}function i(t,n){var e=[];for(var r in t){var o=t[r];e.push(new d.PmzSchemeLine(r,r,f.PmzColor.parse(o.Color),o.LabelsColor,o.LabelsBColor,c.PmzPoint.parseArray(o.Coordinates),l.PmzRect.parseArray(o.Rects),h.asFloatArray(o.Heights),l.PmzRect.parse(o.Rect),l.PmzRect.parseArray(o.Rects2),n[r],!0))}return e}function a(t,n){var e=[];n.getTransports().forEach(function(t){Array.prototype.push.apply(e,Object.keys(n.getTransport(t).lines))});var r={};for(var o in t)-1!==e.indexOf(o)&&(r[o]=t[o]);return r}function s(t,n,e){var s=r(t.Options),u=o(t.AdditionalNodes),f=i(a(t,e),u);return new m.PmzScheme(n,n,s,f)}function u(){throw new TypeError("Not implemented")}var f=t("../model/color"),c=t("../model/point"),l=t("../model/rect"),p=t("../model/spline"),m=t("../model/scheme"),d=t("../model/scheme-line"),h=t("./utils");e.load=s,e.save=u},{"../model/color":3,"../model/point":6,"../model/rect":7,"../model/scheme":9,"../model/scheme-line":8,"../model/spline":10,"./utils":17}],16:[function(t,n,e){"use strict";function r(t){return f.PmzTransportType.Metro}function o(t,n){var e={};for(var r in n){var o=n[r],i={};if(o.Delays)for(var a=o.Delays.split(","),s=0;s<t.length;s++)i[t[s]]=a[s];o.DelayDay&&(i.Day=o.DelayDay),o.DelayNight&&(i.Night=o.DelayNight),e[o.Name]={sectionName:r,lineMap:o.LineMap,stations:o.Stations,driving:o.Driving,delays:i}}return e}function i(t){return t}function a(t){var n={};for(var e in t)-1===["Options","Transfers","AdditionalInfo"].indexOf(e)&&(n[e]=t[e]);return n}function s(t,n,e){return new f.PmzTransport(n,n,r(t.Options||{}),o(e.delays,a(t)),i(t.Transfers||{}))}function u(){throw new TypeError("Not implemented")}var f=t("../model/transport");e.load=s,e.save=u},{"../model/transport":11}],17:[function(t,n,e){(function(n){"use strict";function r(t){var n="";return t.forEach(function(t){n+=String.fromCharCode(t)}),i.decode(n,{mode:"fatal"})}function o(t){for(var n=i.encode(t),e=new Uint8Array(n.length),r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}var i="undefined"!=typeof window?window.windows1251:"undefined"!=typeof n?n.windows1251:null,a=t("../model/base");e.asIntArray=a.asIntArray,e.asFloatArray=a.asFloatArray,e.asArray=a.asArray;var s={DEFAULT_MAP_NAME:"Metro.map",DEFAULT_TRP_NAME:"Metro.trp",DEFAULT_LINE_COLOR:"black"};e.constants=s,e.decodeWindows1251=r,e.encodeWindows1251=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/base":2}]},{},[1])(1)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBtei1saWIuanMiXSwibmFtZXMiOlsiZiIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJnIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsInRoaXMiLCJwbXoiLCJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiRXJyb3IiLCJjb2RlIiwibCIsImNhbGwiLCJsZW5ndGgiLDEsIm1vZGVsXzEiLCJQbXpNb2RlbCIsIm1vZGVsX2ZpbGVfMSIsIlBtekZpbGUiLCIuL21vZGVsL21vZGVsIiwiLi9zdG9yYWdlL21vZGVsLWZpbGUiLDIsImFzSW50IiwidGV4dCIsInJhZGl4IiwidHJpbSIsInBhcnNlSW50IiwiYXNBcnJheSIsInNwbGl0IiwibWFwIiwiaXRlbSIsImFzSW50QXJyYXkiLCJhc0Zsb2F0QXJyYXkiLCJwYXJzZUZsb2F0IiwzLCJCYXNlIiwiUG16Q29sb3IiLCJjIiwicGFyc2UiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwiLi9iYXNlIiw0LCJQbXpNZXRhZGF0YSIsIm5hbWUiLCJjaXR5TmFtZSIsImNvdW50cnlOYW1lIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiY29tbWVudCIsImRlbGF5cyIsNSwibWV0YWRhdGFfMSIsInRyYW5zcG9ydF8xIiwic2NoZW1lXzEiLCJtZXRhZGF0YSIsInRyYW5zcG9ydHMiLCJzY2hlbWVzIiwiY3JlYXRlIiwibW9kZWwiLCJhZGRUcmFuc3BvcnQiLCJQbXpUcmFuc3BvcnRUeXBlIiwiTWV0cm8iLCJhZGRTY2hlbWUiLCJnZXRNZXRhZGF0YSIsImdldFNjaGVtZXMiLCJvcHRpb25zIiwibGluZXMiLCJwdXNoIiwiUG16U2NoZW1lIiwicmVtb3ZlU2NoZW1lIiwic3BsaWNlIiwiaW5kZXhPZiIsImdldFNjaGVtZSIsIml0ZW1zIiwiZmlsdGVyIiwiZ2V0VHJhbnNwb3J0cyIsInR5cGUiLCJ0cmFuc2ZlcnMiLCJQbXpUcmFuc3BvcnQiLCJyZW1vdmVUcmFuc3BvcnQiLCJnZXRUcmFuc3BvcnQiLCIuL21ldGFkYXRhIiwiLi9zY2hlbWUiLCIuL3RyYW5zcG9ydCIsNiwiUG16UG9pbnQiLCJ4IiwieSIsImlzRW1wdHkiLCJ2YWx1ZXMiLCJwYXJzZUFycmF5IiwicG9pbnRzIiwiZm9ybWF0IiwicG9pbnQiLCJqb2luIiwiZm9ybWF0QXJyYXkiLDcsIlBtelJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInJlY3RzIiwicmVjdCIsOCwiUG16U2NoZW1lTGluZSIsImlkIiwiY29sb3IiLCJsYWJlbENvbG9yIiwibGFiZWxCYWNrZ3JvdW5kQ29sb3IiLCJjb29yZHMiLCJoZWlnaHRzIiwicmVjdHMyIiwic3BsaW5lcyIsInZpc2libGUiLDksMTAsInBvaW50XzEiLCJQbXpTcGxpbmUiLCJsaW5lIiwic3JjIiwiZHN0IiwiaXNTbW9vdGgiLCJwYXJ0cyIsInNwbGluZSIsIi4vcG9pbnQiLDExLDEyLCJmb3JtYXRJbmlUZXh0IiwiaW5pIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJzZWN0aW9uS2V5IiwidmFsdWVLZXkiLCJ2YWx1ZSIsIkFycmF5IiwicmVkdWNlIiwicGFyc2VJbmlUZXh0IiwicmVnZXgiLCJzZWN0aW9uIiwicGFyYW0iLCJ0ZXN0IiwibWF0Y2giLCJjdXJyZW50VmFsdWUiLDEzLCJsb2FkIiwiT3B0aW9ucyIsImRlbGF5TmFtZXMiLCJOYW1lIiwiQ2l0eU5hbWUiLCJDb3VudHJ5IiwiTmVlZFZlcnNpb24iLCJNYXBBdXRob3JzIiwic2F2ZSIsIkNvbW1lbnQiLCJEZWxheU5hbWVzIiwiLi4vbW9kZWwvbWV0YWRhdGEiLDE0LCJlbmRzV2l0aCIsInN1ZmZpeCIsImVudW1lcmF0ZUVudHJpZXMiLCJ6aXAiLCJleHQiLCJjYWxsYmFjayIsImVudHJ5TmFtZSIsImZpbGVzIiwiemlwRW50cnkiLCJlbnVtZXJhdGVJbmlFbnRyaWVzIiwiZW50cnkiLCJJbmlGaWxlIiwiUG16VXRpbHMiLCJkZWNvZGVXaW5kb3dzMTI1MSIsImFzVWludDhBcnJheSIsIm9wZW5aaXAiLCJmaWxlIiwiVHlwZUVycm9yIiwiSlNaaXAiLCJjb250ZW50IiwiYXNBcnJheUJ1ZmZlciIsIlBtek1ldGFkYXRhRmlsZSIsIlBtelRyYW5zcG9ydEZpbGUiLCJQbXpTY2hlbWVGaWxlIiwidHJhbnNwb3J0Iiwic2NoZW1lIiwibWV0YUluaSIsIm1ldGFUZXh0IiwibWV0YUVuY29kZWQiLCJlbmNvZGVXaW5kb3dzMTI1MSIsImdlbmVyYXRlIiwiLi4vbW9kZWwvbW9kZWwiLCIuL2luaS1maWxlIiwiLi9tZXRhZGF0YS1maWxlIiwiLi9zY2hlbWUtZmlsZSIsIi4vdHJhbnNwb3J0LWZpbGUiLCIuL3V0aWxzIiwxNSwibG9hZE1hcE9wdGlvbnMiLCJpbWFnZUZpbGVOYW1lIiwic3RhdGlvbkRpYW1ldGVyIiwibGluZVdpZHRoIiwidXBwZXJDYXNlIiwid29yZFdyYXAiLCJpc1ZlY3RvciIsImNoZWNrZWRUcmFuc3BvcnRzIiwibG9hZFNwbGluZXMiLCJsaW5lTm9kZXMiLCJrZXkiLCJzcGxpbmVfMSIsImxvYWRNYXBMaW5lcyIsInNjaGVtZV9saW5lXzEiLCJjb2xvcl8xIiwicmVjdF8xIiwiZmlsdGVyTGluZVNlY3Rpb25zIiwibGluZU5hbWVzIiwiYXBwbHkiLCJzZWN0aW9ucyIsIi4uL21vZGVsL2NvbG9yIiwiLi4vbW9kZWwvcG9pbnQiLCIuLi9tb2RlbC9yZWN0IiwiLi4vbW9kZWwvc2NoZW1lIiwiLi4vbW9kZWwvc2NoZW1lLWxpbmUiLCIuLi9tb2RlbC9zcGxpbmUiLDE2LCJsb2FkVHJwT3B0aW9ucyIsImxvYWRUcnBMaW5lcyIsImNpdHlEZWxheXMiLCJkZWxheVZhbHVlcyIsIkRlbGF5cyIsIkRlbGF5RGF5IiwiRGVsYXlOaWdodCIsInNlY3Rpb25OYW1lIiwibGluZU1hcCIsInN0YXRpb25zIiwiZHJpdmluZyIsImxvYWRUcnBUcmFuc2ZlcnMiLCJmaWx0ZXJUcnBMaW5lU2VjdGlvbnMiLCIuLi9tb2RlbC90cmFuc3BvcnQiLDE3LCJidWZmZXIiLCJieXRlU3RyaW5nIiwiYiIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIndpbmRvd3MxMjUxIiwiZGVjb2RlIiwibW9kZSIsImFzY2lpRW5jb2RlZFRleHQiLCJlbmNvZGUiLCJVaW50OEFycmF5IiwiY2hhckNvZGVBdCIsImJhc2VfMSIsImNvbnN0YW50cyIsIkRFRkFVTFRfTUFQX05BTUUiLCJERUZBVUxUX1RSUF9OQU1FIiwiREVGQVVMVF9MSU5FX0NPTE9SIiwiLi4vbW9kZWwvYmFzZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FBRyxHQUFvQixnQkFBVkMsVUFBb0MsbUJBQVRDLFFBQXNCQSxPQUFPRCxRQUFRRCxRQUFTLElBQW1CLGtCQUFURyxTQUFxQkEsT0FBT0MsSUFBS0QsVUFBVUgsT0FBTyxDQUFDLEdBQUlLLEVBQWtDQSxHQUFiLG1CQUFUQyxRQUF3QkEsT0FBK0IsbUJBQVRDLFFBQXdCQSxPQUE2QixtQkFBUEMsTUFBc0JBLEtBQVlDLEtBQUtKLEVBQUVLLElBQU1WLE1BQU8sV0FBcUMsTUFBTyxTQUFVVyxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSWhCLEdBQUUsR0FBSXFCLE9BQU0sdUJBQXVCTCxFQUFFLElBQUssTUFBTWhCLEdBQUVzQixLQUFLLG1CQUFtQnRCLEVBQUUsR0FBSXVCLEdBQUVWLEVBQUVHLElBQUlmLFdBQVlXLEdBQUVJLEdBQUcsR0FBR1EsS0FBS0QsRUFBRXRCLFFBQVEsU0FBU1UsR0FBRyxHQUFJRSxHQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEVBQUcsT0FBT0ksR0FBRUYsRUFBRUEsRUFBRUYsSUFBSVksRUFBRUEsRUFBRXRCLFFBQVFVLEVBQUVDLEVBQUVD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LEdBQWtCckssR0FHdkIsSUFBSyxHQUZEZ08sR0FBbUJILEVBQVlJLE9BQU9qTyxHQUN0Q3dOLEVBQVMsR0FBSVUsWUFBV0YsRUFBaUIxTyxRQUNwQ0wsRUFBSSxFQUFHQSxFQUFJK08sRUFBaUIxTyxPQUFRTCxJQUN6Q3VPLEVBQU92TyxHQUFLK08sRUFBaUJHLFdBQVdsUCxFQUU1QyxPQUFPdU8sR0F6QlgsR0FBSUssR0FBaUMsbUJBQVgxUCxRQUF5QkEsT0FBb0IsWUFBc0IsbUJBQVhDLEdBQXlCQSxFQUFvQixZQUFJLEtBQy9IZ1EsRUFBU3BQLEVBQVEsZ0JBQ3JCbEIsR0FBUTBDLFdBQWE0TixFQUFPNU4sV0FDNUIxQyxFQUFRMkMsYUFBZTJOLEVBQU8zTixhQUM5QjNDLEVBQVFzQyxRQUFVZ08sRUFBT2hPLE9BQ3pCLElBQUlpTyxJQUNBQyxpQkFBa0IsWUFDbEJDLGlCQUFrQixZQUNsQkMsbUJBQW9CLFFBRXhCMVEsR0FBUXVRLFVBQVlBLEVBUXBCdlEsRUFBUXVMLGtCQUFvQkEsRUFTNUJ2TCxFQUFRdU0sa0JBQW9CQSxJQUV6QmhMLEtBQUtmLEtBQXVCLG1CQUFYRixRQUF5QkEsT0FBeUIsbUJBQVRDLE1BQXVCQSxLQUF5QixtQkFBWEYsUUFBeUJBLGFBQ3hIc1EsZ0JBQWdCLFNBQVMsSUFBSSIsImZpbGUiOiJwbXotbGliLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLnBteiA9IGYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIG1vZGVsXzEgPSByZXF1aXJlKFwiLi9tb2RlbC9tb2RlbFwiKTtcbmV4cG9ydHMuUG16TW9kZWwgPSBtb2RlbF8xLlBtek1vZGVsO1xudmFyIG1vZGVsX2ZpbGVfMSA9IHJlcXVpcmUoXCIuL3N0b3JhZ2UvbW9kZWwtZmlsZVwiKTtcbmV4cG9ydHMuUG16RmlsZSA9IG1vZGVsX2ZpbGVfMS5QbXpGaWxlO1xuXG59LHtcIi4vbW9kZWwvbW9kZWxcIjo1LFwiLi9zdG9yYWdlL21vZGVsLWZpbGVcIjoxNH1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBhc0ludCh0ZXh0LCByYWRpeCkge1xuICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gMTA7IH1cbiAgICBpZiAoIXRleHQgfHwgIXRleHQubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0ZXh0ID0gdGV4dC50cmltKCk7XG4gICAgaWYgKHRleHQgPT09ICc/Jykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRleHQgPT09ICctMScpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGV4dCwgcmFkaXgpO1xufVxuZXhwb3J0cy5hc0ludCA9IGFzSW50O1xuZnVuY3Rpb24gYXNBcnJheSh0ZXh0KSB7XG4gICAgaWYgKCF0ZXh0KVxuICAgICAgICByZXR1cm4gW107XG4gICAgcmV0dXJuIHRleHQuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gPT09ICc/JyA/IG51bGwgOiBpdGVtO1xuICAgIH0pO1xufVxuZXhwb3J0cy5hc0FycmF5ID0gYXNBcnJheTtcbmZ1bmN0aW9uIGFzSW50QXJyYXkodGV4dCkge1xuICAgIHJldHVybiBhc0FycmF5KHRleHQpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoIWl0ZW0pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGl0ZW0pO1xuICAgIH0pO1xufVxuZXhwb3J0cy5hc0ludEFycmF5ID0gYXNJbnRBcnJheTtcbmZ1bmN0aW9uIGFzRmxvYXRBcnJheSh0ZXh0KSB7XG4gICAgcmV0dXJuIGFzQXJyYXkodGV4dCkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmICghaXRlbSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChpdGVtKTtcbiAgICB9KTtcbn1cbmV4cG9ydHMuYXNGbG9hdEFycmF5ID0gYXNGbG9hdEFycmF5O1xuXG59LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIEJhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcbnZhciBQbXpDb2xvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG16Q29sb3IoYykge1xuICAgICAgICB0aGlzLmMgPSBjO1xuICAgICAgICA7XG4gICAgfVxuICAgIFBtekNvbG9yLnBhcnNlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQbXpDb2xvcihCYXNlLmFzSW50KHRleHQsIDE2KSk7XG4gICAgfTtcbiAgICBQbXpDb2xvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuICctMSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYy50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICB9O1xuICAgIHJldHVybiBQbXpDb2xvcjtcbn0oKSk7XG5leHBvcnRzLlBtekNvbG9yID0gUG16Q29sb3I7XG5cbn0se1wiLi9iYXNlXCI6Mn1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUG16TWV0YWRhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBtek1ldGFkYXRhKG5hbWUsIGNpdHlOYW1lLCBjb3VudHJ5TmFtZSwgdmVyc2lvbiwgZGVzY3JpcHRpb24sIGNvbW1lbnQsIGRlbGF5cykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNpdHlOYW1lID0gY2l0eU5hbWU7XG4gICAgICAgIHRoaXMuY291bnRyeU5hbWUgPSBjb3VudHJ5TmFtZTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgICAgICB0aGlzLmRlbGF5cyA9IGRlbGF5cztcbiAgICB9XG4gICAgcmV0dXJuIFBtek1ldGFkYXRhO1xufSgpKTtcbmV4cG9ydHMuUG16TWV0YWRhdGEgPSBQbXpNZXRhZGF0YTtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBtZXRhZGF0YV8xID0gcmVxdWlyZSgnLi9tZXRhZGF0YScpO1xudmFyIHRyYW5zcG9ydF8xID0gcmVxdWlyZSgnLi90cmFuc3BvcnQnKTtcbnZhciBzY2hlbWVfMSA9IHJlcXVpcmUoJy4vc2NoZW1lJyk7XG52YXIgUG16TW9kZWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBtek1vZGVsKG1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgdGhpcy50cmFuc3BvcnRzID0gW107XG4gICAgICAgIHRoaXMuc2NoZW1lcyA9IFtdO1xuICAgIH1cbiAgICBQbXpNb2RlbC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb2RlbCA9IG5ldyBQbXpNb2RlbChuZXcgbWV0YWRhdGFfMS5QbXpNZXRhZGF0YSgnVW5rbm93bicsIG51bGwsIG51bGwsICcxLjAuMCcsIG51bGwsIG51bGwsIG51bGwpKTtcbiAgICAgICAgbW9kZWwuYWRkVHJhbnNwb3J0KCdNZXRyby50cnAnLCB0cmFuc3BvcnRfMS5QbXpUcmFuc3BvcnRUeXBlLk1ldHJvKTtcbiAgICAgICAgbW9kZWwuYWRkU2NoZW1lKCdNZXRyby5tYXAnKTtcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH07XG4gICAgUG16TW9kZWwucHJvdG90eXBlLmdldE1ldGFkYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YTtcbiAgICB9O1xuICAgIFBtek1vZGVsLnByb3RvdHlwZS5nZXRTY2hlbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWVzLm1hcChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5uYW1lOyB9KTtcbiAgICB9O1xuICAgIFBtek1vZGVsLnByb3RvdHlwZS5hZGRTY2hlbWUgPSBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucywgbGluZXMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gbnVsbDsgfVxuICAgICAgICBpZiAobGluZXMgPT09IHZvaWQgMCkgeyBsaW5lcyA9IG51bGw7IH1cbiAgICAgICAgdGhpcy5zY2hlbWVzLnB1c2gobmV3IHNjaGVtZV8xLlBtelNjaGVtZShuYW1lLCBuYW1lLCBvcHRpb25zIHx8IHt9LCBsaW5lcyB8fCBbXSkpO1xuICAgIH07XG4gICAgUG16TW9kZWwucHJvdG90eXBlLnJlbW92ZVNjaGVtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRoaXMuc2NoZW1lcy5zcGxpY2UodGhpcy5zY2hlbWVzLmluZGV4T2YodGhpcy5nZXRTY2hlbWUobmFtZSkpKTtcbiAgICB9O1xuICAgIFBtek1vZGVsLnByb3RvdHlwZS5nZXRTY2hlbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnNjaGVtZXMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLm5hbWUgPT09IG5hbWU7IH0pO1xuICAgICAgICBpZiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtc1swXTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWUgXCIgKyBuYW1lICsgXCIgbm90IGZvdW5kXCIpO1xuICAgIH07XG4gICAgUG16TW9kZWwucHJvdG90eXBlLmdldFRyYW5zcG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydHMubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLm5hbWU7IH0pO1xuICAgIH07XG4gICAgUG16TW9kZWwucHJvdG90eXBlLmFkZFRyYW5zcG9ydCA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlLCBsaW5lcywgdHJhbnNmZXJzKSB7XG4gICAgICAgIGlmIChsaW5lcyA9PT0gdm9pZCAwKSB7IGxpbmVzID0gbnVsbDsgfVxuICAgICAgICBpZiAodHJhbnNmZXJzID09PSB2b2lkIDApIHsgdHJhbnNmZXJzID0gbnVsbDsgfVxuICAgICAgICB0aGlzLnRyYW5zcG9ydHMucHVzaChuZXcgdHJhbnNwb3J0XzEuUG16VHJhbnNwb3J0KG5hbWUsIG5hbWUsIHR5cGUsIGxpbmVzIHx8IHt9LCB0cmFuc2ZlcnMgfHwge30pKTtcbiAgICB9O1xuICAgIFBtek1vZGVsLnByb3RvdHlwZS5yZW1vdmVUcmFuc3BvcnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydHMuc3BsaWNlKHRoaXMudHJhbnNwb3J0cy5pbmRleE9mKHRoaXMuZ2V0VHJhbnNwb3J0KG5hbWUpKSk7XG4gICAgfTtcbiAgICBQbXpNb2RlbC5wcm90b3R5cGUuZ2V0VHJhbnNwb3J0ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy50cmFuc3BvcnRzLmZpbHRlcihmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5uYW1lID09PSBuYW1lOyB9KTtcbiAgICAgICAgaWYgKGl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IFwiICsgbmFtZSArIFwiIG5vdCBmb3VuZFwiKTtcbiAgICB9O1xuICAgIHJldHVybiBQbXpNb2RlbDtcbn0oKSk7XG5leHBvcnRzLlBtek1vZGVsID0gUG16TW9kZWw7XG5cbn0se1wiLi9tZXRhZGF0YVwiOjQsXCIuL3NjaGVtZVwiOjksXCIuL3RyYW5zcG9ydFwiOjExfV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBCYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG52YXIgUG16UG9pbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBtelBvaW50KHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgUG16UG9pbnQucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggPT09IDAgJiYgdGhpcy55ID09PSAwO1xuICAgIH07XG4gICAgUG16UG9pbnQucGFyc2UgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gQmFzZS5hc0ludEFycmF5KHRleHQpO1xuICAgICAgICByZXR1cm4gbmV3IFBtelBvaW50KHZhbHVlc1swXSwgdmFsdWVzWzFdKTtcbiAgICB9O1xuICAgIFBtelBvaW50LnBhcnNlQXJyYXkgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gQmFzZS5hc0ludEFycmF5KHRleHQpO1xuICAgICAgICB2YXIgcG9pbnRzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHZhbHVlcy5sZW5ndGggLSAxKTsgaSArPSAyKSB7XG4gICAgICAgICAgICBwb2ludHMucHVzaChuZXcgUG16UG9pbnQodmFsdWVzW2ldLCB2YWx1ZXNbaSArIDFdKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9O1xuICAgIFBtelBvaW50LmZvcm1hdCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gW3BvaW50LngsIHBvaW50LnldLmpvaW4oJywnKTtcbiAgICB9O1xuICAgIFBtelBvaW50LmZvcm1hdEFycmF5ID0gZnVuY3Rpb24gKHBvaW50cykge1xuICAgICAgICByZXR1cm4gcG9pbnRzLm1hcChQbXpQb2ludC5mb3JtYXQpLmpvaW4oJywgJyk7XG4gICAgfTtcbiAgICByZXR1cm4gUG16UG9pbnQ7XG59KCkpO1xuZXhwb3J0cy5QbXpQb2ludCA9IFBtelBvaW50O1xuXG59LHtcIi4vYmFzZVwiOjJ9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIEJhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcbnZhciBQbXpSZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQbXpSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gICAgUG16UmVjdC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCA9PT0gMCAmJiB0aGlzLnkgPT09IDAgJiYgdGhpcy53aWR0aCA9PT0gMCAmJiB0aGlzLmhlaWdodCA9PT0gMDtcbiAgICB9O1xuICAgIFBtelJlY3QucGFyc2UgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gQmFzZS5hc0ludEFycmF5KHRleHQpO1xuICAgICAgICByZXR1cm4gbmV3IFBtelJlY3QodmFsdWVzWzBdLCB2YWx1ZXNbMV0sIHZhbHVlc1syXSwgdmFsdWVzWzNdKTtcbiAgICB9O1xuICAgIFBtelJlY3QucGFyc2VBcnJheSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBCYXNlLmFzSW50QXJyYXkodGV4dCk7XG4gICAgICAgIHZhciByZWN0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICh2YWx1ZXMubGVuZ3RoIC0gMyk7IGkgKz0gMikge1xuICAgICAgICAgICAgcmVjdHMucHVzaChuZXcgUG16UmVjdCh2YWx1ZXNbaV0sIHZhbHVlc1tpICsgMV0sIHZhbHVlc1tpICsgMl0sIHZhbHVlc1tpICsgM10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjdHM7XG4gICAgfTtcbiAgICBQbXpSZWN0LmZvcm1hdCA9IGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgIHJldHVybiBbcmVjdC54LCByZWN0LnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0XS5qb2luKCcsJyk7XG4gICAgfTtcbiAgICBQbXpSZWN0LmZvcm1hdEFycmF5ID0gZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgICAgcmV0dXJuIHJlY3QubWFwKFBtelJlY3QuZm9ybWF0KS5qb2luKCcsICcpO1xuICAgIH07XG4gICAgcmV0dXJuIFBtelJlY3Q7XG59KCkpO1xuZXhwb3J0cy5QbXpSZWN0ID0gUG16UmVjdDtcblxufSx7XCIuL2Jhc2VcIjoyfV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBQbXpTY2hlbWVMaW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQbXpTY2hlbWVMaW5lKGlkLCBuYW1lLCBjb2xvciwgbGFiZWxDb2xvciwgbGFiZWxCYWNrZ3JvdW5kQ29sb3IsIGNvb3JkcywgcmVjdHMsIGhlaWdodHMsIHJlY3QsIHJlY3RzMiwgc3BsaW5lcywgdmlzaWJsZSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5sYWJlbENvbG9yID0gbGFiZWxDb2xvcjtcbiAgICAgICAgdGhpcy5sYWJlbEJhY2tncm91bmRDb2xvciA9IGxhYmVsQmFja2dyb3VuZENvbG9yO1xuICAgICAgICB0aGlzLmNvb3JkcyA9IGNvb3JkcztcbiAgICAgICAgdGhpcy5yZWN0cyA9IHJlY3RzO1xuICAgICAgICB0aGlzLmhlaWdodHMgPSBoZWlnaHRzO1xuICAgICAgICB0aGlzLnJlY3QgPSByZWN0O1xuICAgICAgICB0aGlzLnJlY3RzMiA9IHJlY3RzMjtcbiAgICAgICAgdGhpcy5zcGxpbmVzID0gc3BsaW5lcztcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICB9XG4gICAgcmV0dXJuIFBtelNjaGVtZUxpbmU7XG59KCkpO1xuZXhwb3J0cy5QbXpTY2hlbWVMaW5lID0gUG16U2NoZW1lTGluZTtcblxufSx7fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBQbXpTY2hlbWUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBtelNjaGVtZShpZCwgbmFtZSwgb3B0aW9ucywgbGluZXMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmxpbmVzID0gbGluZXM7XG4gICAgfVxuICAgIFBtelNjaGVtZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnW29iamVjdCBTY2hlbWUgJyArIHRoaXMuaWQgKyAnOicgKyB0aGlzLm5hbWUgKyAnXSc7XG4gICAgfTtcbiAgICByZXR1cm4gUG16U2NoZW1lO1xufSgpKTtcbmV4cG9ydHMuUG16U2NoZW1lID0gUG16U2NoZW1lO1xuXG59LHt9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBCYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG52YXIgcG9pbnRfMSA9IHJlcXVpcmUoJy4vcG9pbnQnKTtcbnZhciBQbXpTcGxpbmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBtelNwbGluZShsaW5lLCBzcmMsIGRzdCwgcG9pbnRzLCBpc1Ntb290aCkge1xuICAgICAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgICAgICB0aGlzLnNyYyA9IHNyYztcbiAgICAgICAgdGhpcy5kc3QgPSBkc3Q7XG4gICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICB0aGlzLmlzU21vb3RoID0gaXNTbW9vdGg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBQbXpTcGxpbmUucGFyc2UgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB2YXIgcGFydHMgPSBCYXNlLmFzQXJyYXkodGV4dCk7XG4gICAgICAgIHZhciBsaW5lID0gcGFydHNbMF07XG4gICAgICAgIHZhciBzcmMgPSBwYXJ0c1sxXTtcbiAgICAgICAgdmFyIGRzdCA9IHBhcnRzWzJdO1xuICAgICAgICB2YXIgaXNTbW9vdGggPSBwYXJ0cy5sZW5ndGggJSAyID09PSAwO1xuICAgICAgICB2YXIgcG9pbnRzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAzOyBpIDwgKHBhcnRzLmxlbmd0aCAtIDEpOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKG5ldyBwb2ludF8xLlBtelBvaW50KHBhcnNlSW50KHBhcnRzW2ldKSwgcGFyc2VJbnQocGFydHNbaSArIDFdKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUG16U3BsaW5lKGxpbmUsIHNyYywgZHN0LCBwb2ludHMsIGlzU21vb3RoKTtcbiAgICB9O1xuICAgIFBtelNwbGluZS5mb3JtYXQgPSBmdW5jdGlvbiAoc3BsaW5lKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBzcGxpbmUubGluZSxcbiAgICAgICAgICAgIHNwbGluZS5zcmMsXG4gICAgICAgICAgICBzcGxpbmUuZHN0LFxuICAgICAgICAgICAgcG9pbnRfMS5QbXpQb2ludC5mb3JtYXRBcnJheShzcGxpbmUucG9pbnRzKSxcbiAgICAgICAgICAgIHNwbGluZS5pc1Ntb290aFxuICAgICAgICBdLmpvaW4oJywnKTtcbiAgICB9O1xuICAgIHJldHVybiBQbXpTcGxpbmU7XG59KCkpO1xuZXhwb3J0cy5QbXpTcGxpbmUgPSBQbXpTcGxpbmU7XG5cbn0se1wiLi9iYXNlXCI6MixcIi4vcG9pbnRcIjo2fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24gKFBtelRyYW5zcG9ydFR5cGUpIHtcbiAgICBQbXpUcmFuc3BvcnRUeXBlW1BtelRyYW5zcG9ydFR5cGVbXCJNZXRyb1wiXSA9IDBdID0gXCJNZXRyb1wiO1xuICAgIFBtelRyYW5zcG9ydFR5cGVbUG16VHJhbnNwb3J0VHlwZVtcIkJ1c1wiXSA9IDFdID0gXCJCdXNcIjtcbn0pKGV4cG9ydHMuUG16VHJhbnNwb3J0VHlwZSB8fCAoZXhwb3J0cy5QbXpUcmFuc3BvcnRUeXBlID0ge30pKTtcbnZhciBQbXpUcmFuc3BvcnRUeXBlID0gZXhwb3J0cy5QbXpUcmFuc3BvcnRUeXBlO1xudmFyIFBtelRyYW5zcG9ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG16VHJhbnNwb3J0KGlkLCBuYW1lLCB0eXBlLCBsaW5lcywgdHJhbnNmZXJzKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgICAgICB0aGlzLnRyYW5zZmVycyA9IHRyYW5zZmVycztcbiAgICB9XG4gICAgcmV0dXJuIFBtelRyYW5zcG9ydDtcbn0oKSk7XG5leHBvcnRzLlBtelRyYW5zcG9ydCA9IFBtelRyYW5zcG9ydDtcblxufSx7fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBmb3JtYXRJbmlUZXh0KGluaSkge1xuICAgIHZhciBsaW5lcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKGluaSkuZm9yRWFjaChmdW5jdGlvbiAoc2VjdGlvbktleSkge1xuICAgICAgICBsaW5lcy5wdXNoKCdbJyArIHNlY3Rpb25LZXkgKyAnXScpO1xuICAgICAgICBPYmplY3Qua2V5cyhpbmlbc2VjdGlvbktleV0pLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlS2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpbmlbc2VjdGlvbktleV1bdmFsdWVLZXldO1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2godmFsdWVLZXkgKyAnPScgKyB2YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaCh2YWx1ZUtleSArICc9JyArIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxpbmVzLnJlZHVjZShmdW5jdGlvbiAoYSwgYykgeyByZXR1cm4gYSArICdcXG4nICsgYzsgfSk7XG59XG5leHBvcnRzLmZvcm1hdEluaVRleHQgPSBmb3JtYXRJbmlUZXh0O1xuZnVuY3Rpb24gcGFyc2VJbmlUZXh0KHRleHQpIHtcbiAgICB2YXIgcmVnZXggPSB7XG4gICAgICAgIHNlY3Rpb246IC9eXFxzKlxcW1xccyooW15cXF1dKilcXHMqXFxdXFxzKiQvLFxuICAgICAgICBwYXJhbTogL15cXHMqKFtcXHdcXC5cXC1cXF9dKylcXHMqPVxccyooLio/KVxccyokLyxcbiAgICAgICAgY29tbWVudDogL15cXHMqOy4qJC9cbiAgICB9O1xuICAgIHZhciB2YWx1ZSA9IHt9O1xuICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoL1xcclxcbnxcXHJ8XFxuLyk7XG4gICAgdmFyIHNlY3Rpb24gPSBudWxsO1xuICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgaWYgKHJlZ2V4LmNvbW1lbnQudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlZ2V4LnBhcmFtLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGxpbmUubWF0Y2gocmVnZXgucGFyYW0pO1xuICAgICAgICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdmFsdWVbc2VjdGlvbl1bbWF0Y2hbMV1dO1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlW3NlY3Rpb25dW21hdGNoWzFdXSA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoY3VycmVudFZhbHVlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW3NlY3Rpb25dW21hdGNoWzFdXSA9IFtjdXJyZW50VmFsdWUsIG1hdGNoWzJdXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW3NlY3Rpb25dW21hdGNoWzFdXS5wdXNoKG1hdGNoWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlW21hdGNoWzFdXSA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlZ2V4LnNlY3Rpb24udGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaChyZWdleC5zZWN0aW9uKTtcbiAgICAgICAgICAgIHZhbHVlW21hdGNoWzFdXSA9IHt9O1xuICAgICAgICAgICAgc2VjdGlvbiA9IG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpbmUubGVuZ3RoID09IDAgJiYgc2VjdGlvbikge1xuICAgICAgICAgICAgc2VjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmV4cG9ydHMucGFyc2VJbmlUZXh0ID0gcGFyc2VJbmlUZXh0O1xuXG59LHt9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBtZXRhZGF0YV8xID0gcmVxdWlyZSgnLi4vbW9kZWwvbWV0YWRhdGEnKTtcbmZ1bmN0aW9uIGxvYWQoaW5pKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBpbmkuT3B0aW9ucztcbiAgICB2YXIgZGVsYXlOYW1lcyA9IChvcHRpb25zWydEZWxheU5hbWVzJ10gfHwgJycpLnNwbGl0KCdcXG4nKTtcbiAgICByZXR1cm4gbmV3IG1ldGFkYXRhXzEuUG16TWV0YWRhdGEob3B0aW9ucy5OYW1lLCBvcHRpb25zLkNpdHlOYW1lLCBvcHRpb25zLkNvdW50cnksIG9wdGlvbnMuTmVlZFZlcnNpb24sIG9wdGlvbnMuTWFwQXV0aG9ycy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGMpIHsgcmV0dXJuIGEgKyAnXFxuJyArIGM7IH0pLCBvcHRpb25zWydDb21tZW50J10sIGRlbGF5TmFtZXMpO1xufVxuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmZ1bmN0aW9uIHNhdmUobWV0YWRhdGEpIHtcbiAgICB2YXIgaW5pID0ge1xuICAgICAgICBPcHRpb25zOiB7XG4gICAgICAgICAgICBOYW1lOiBtZXRhZGF0YS5uYW1lLFxuICAgICAgICAgICAgQ2l0eU5hbWU6IG1ldGFkYXRhLmNpdHlOYW1lIHx8ICdVbmtub3duJyxcbiAgICAgICAgICAgIENvdW50cnk6IG1ldGFkYXRhLmNvdW50cnlOYW1lIHx8ICdVbmtub3duJyxcbiAgICAgICAgICAgIE5lZWRWZXJzaW9uOiBtZXRhZGF0YS52ZXJzaW9uIHx8ICcxLjAuMCcsXG4gICAgICAgICAgICBNYXBBdXRob3JzOiAobWV0YWRhdGEuZGVzY3JpcHRpb24gfHwgJycpLnNwbGl0KCdcXG4nKVxuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAobWV0YWRhdGEuY29tbWVudCkge1xuICAgICAgICBpbmkuT3B0aW9ucy5Db21tZW50ID0gbWV0YWRhdGEuY29tbWVudDtcbiAgICB9XG4gICAgaWYgKG1ldGFkYXRhLmRlbGF5cykge1xuICAgICAgICBpbmkuT3B0aW9ucy5EZWxheU5hbWVzID0gbWV0YWRhdGEuZGVsYXlzLnJlZHVjZShmdW5jdGlvbiAoYSwgYykgeyByZXR1cm4gYSArICcsJyArIGM7IH0pO1xuICAgIH1cbiAgICByZXR1cm4gaW5pO1xufVxuZXhwb3J0cy5zYXZlID0gc2F2ZTtcblxufSx7XCIuLi9tb2RlbC9tZXRhZGF0YVwiOjR9XSwxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9qc3ppcC5kLnRzXCIgLz5cblwidXNlIHN0cmljdFwiO1xudmFyIEpTWmlwID0gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3dbJ0pTWmlwJ10gOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsWydKU1ppcCddIDogbnVsbCk7XG52YXIgUG16VXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgUG16TWV0YWRhdGFGaWxlID0gcmVxdWlyZSgnLi9tZXRhZGF0YS1maWxlJyk7XG52YXIgUG16VHJhbnNwb3J0RmlsZSA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0LWZpbGUnKTtcbnZhciBQbXpTY2hlbWVGaWxlID0gcmVxdWlyZSgnLi9zY2hlbWUtZmlsZScpO1xudmFyIEluaUZpbGUgPSByZXF1aXJlKCcuL2luaS1maWxlJyk7XG52YXIgbW9kZWxfMSA9IHJlcXVpcmUoJy4uL21vZGVsL21vZGVsJyk7XG5mdW5jdGlvbiBlbmRzV2l0aCh0ZXh0LCBzdWZmaXgpIHtcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dC5pbmRleE9mKHN1ZmZpeCwgdGV4dC5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSAhPT0gLTE7XG59XG47XG5mdW5jdGlvbiBlbnVtZXJhdGVFbnRyaWVzKHppcCwgZXh0LCBjYWxsYmFjaykge1xuICAgIGZvciAodmFyIGVudHJ5TmFtZSBpbiB6aXAuZmlsZXMpIHtcbiAgICAgICAgdmFyIHppcEVudHJ5ID0gemlwLmZpbGVzW2VudHJ5TmFtZV07XG4gICAgICAgIGlmIChlbmRzV2l0aChlbnRyeU5hbWUsIGV4dCkpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhlbnRyeU5hbWUsIHppcEVudHJ5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGVudW1lcmF0ZUluaUVudHJpZXMoemlwLCBleHQsIGNhbGxiYWNrKSB7XG4gICAgZW51bWVyYXRlRW50cmllcyh6aXAsIGV4dCwgZnVuY3Rpb24gKG5hbWUsIGVudHJ5KSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuYW1lLCBJbmlGaWxlLnBhcnNlSW5pVGV4dChQbXpVdGlscy5kZWNvZGVXaW5kb3dzMTI1MShlbnRyeS5hc1VpbnQ4QXJyYXkoKSkpKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG9wZW5aaXAoZmlsZSkge1xuICAgIGlmIChbJ2FwcGxpY2F0aW9uL3gtemlwLWNvbXByZXNzZWQnLCAnYXBwbGljYXRpb24vemlwJ10uaW5kZXhPZihmaWxlLnR5cGUpID09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgZmlsZSB0eXBlICcgKyBmaWxlLnR5cGUgKyAnIGZvciBQTVogbWFwJyk7XG4gICAgfVxuICAgIHZhciB6aXAgPSBuZXcgSlNaaXAoZmlsZS5jb250ZW50KTtcbiAgICBlbnVtZXJhdGVFbnRyaWVzKHppcCwgJy5wbXonLCBmdW5jdGlvbiAobmFtZSwgZW50cnkpIHtcbiAgICAgICAgemlwID0gbmV3IEpTWmlwKGVudHJ5LmFzQXJyYXlCdWZmZXIoKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB6aXA7XG59XG52YXIgUG16RmlsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG16RmlsZSgpIHtcbiAgICB9XG4gICAgUG16RmlsZS5sb2FkID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgdmFyIHppcCA9IG9wZW5aaXAoZmlsZSk7XG4gICAgICAgIHZhciBtb2RlbCA9IG51bGw7XG4gICAgICAgIGVudW1lcmF0ZUluaUVudHJpZXMoemlwLCAnLmN0eScsIGZ1bmN0aW9uIChuYW1lLCBpbmkpIHtcbiAgICAgICAgICAgIG1vZGVsID0gbmV3IG1vZGVsXzEuUG16TW9kZWwoUG16TWV0YWRhdGFGaWxlLmxvYWQoaW5pKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIW1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGZpbGUgZm9ybWF0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZW51bWVyYXRlSW5pRW50cmllcyh6aXAsICcudHJwJywgZnVuY3Rpb24gKG5hbWUsIGluaSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zcG9ydCA9IFBtelRyYW5zcG9ydEZpbGUubG9hZChpbmksIG5hbWUsIG1vZGVsLmdldE1ldGFkYXRhKCkpO1xuICAgICAgICAgICAgbW9kZWwuYWRkVHJhbnNwb3J0KHRyYW5zcG9ydC5uYW1lLCB0cmFuc3BvcnQub3B0aW9ucywgdHJhbnNwb3J0LmxpbmVzLCB0cmFuc3BvcnQudHJhbnNmZXJzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVudW1lcmF0ZUluaUVudHJpZXMoemlwLCAnLm1hcCcsIGZ1bmN0aW9uIChuYW1lLCBpbmkpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWUgPSBQbXpTY2hlbWVGaWxlLmxvYWQoaW5pLCBuYW1lLCBtb2RlbCk7XG4gICAgICAgICAgICBtb2RlbC5hZGRTY2hlbWUoc2NoZW1lLm5hbWUsIHNjaGVtZS5vcHRpb25zLCBzY2hlbWUubGluZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH07XG4gICAgUG16RmlsZS5zYXZlID0gZnVuY3Rpb24gKGZpbGUsIG1vZGVsKSB7XG4gICAgICAgIHZhciB6aXAgPSBvcGVuWmlwKGZpbGUpO1xuICAgICAgICB2YXIgbWV0YUluaSA9IFBtek1ldGFkYXRhRmlsZS5zYXZlKG1vZGVsLm1ldGFkYXRhKTtcbiAgICAgICAgdmFyIG1ldGFUZXh0ID0gSW5pRmlsZS5mb3JtYXRJbmlUZXh0KG1ldGFJbmkpO1xuICAgICAgICB2YXIgbWV0YUVuY29kZWQgPSBQbXpVdGlscy5lbmNvZGVXaW5kb3dzMTI1MShtZXRhVGV4dCk7XG4gICAgICAgIHppcC5maWxlKG1vZGVsLm1ldGFkYXRhLm5hbWUgKyAnLmN0eScsIG1ldGFFbmNvZGVkKTtcbiAgICAgICAgZmlsZS5jb250ZW50ID0gemlwLmdlbmVyYXRlKHsgdHlwZTogJ2FycmF5YnVmZmVyJyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBQbXpGaWxlO1xufSgpKTtcbmV4cG9ydHMuUG16RmlsZSA9IFBtekZpbGU7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7XCIuLi9tb2RlbC9tb2RlbFwiOjUsXCIuL2luaS1maWxlXCI6MTIsXCIuL21ldGFkYXRhLWZpbGVcIjoxMyxcIi4vc2NoZW1lLWZpbGVcIjoxNSxcIi4vdHJhbnNwb3J0LWZpbGVcIjoxNixcIi4vdXRpbHNcIjoxN31dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGNvbG9yXzEgPSByZXF1aXJlKCcuLi9tb2RlbC9jb2xvcicpO1xudmFyIHBvaW50XzEgPSByZXF1aXJlKCcuLi9tb2RlbC9wb2ludCcpO1xudmFyIHJlY3RfMSA9IHJlcXVpcmUoJy4uL21vZGVsL3JlY3QnKTtcbnZhciBzcGxpbmVfMSA9IHJlcXVpcmUoJy4uL21vZGVsL3NwbGluZScpO1xudmFyIHNjaGVtZV8xID0gcmVxdWlyZSgnLi4vbW9kZWwvc2NoZW1lJyk7XG52YXIgc2NoZW1lX2xpbmVfMSA9IHJlcXVpcmUoJy4uL21vZGVsL3NjaGVtZS1saW5lJyk7XG52YXIgUG16VXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5mdW5jdGlvbiBsb2FkTWFwT3B0aW9ucyhpbmkpIHtcbiAgICBpZiAoIWluaSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGltYWdlRmlsZU5hbWU6IGluaVsnSW1hZ2VGaWxlTmFtZSddLFxuICAgICAgICBzdGF0aW9uRGlhbWV0ZXI6IGluaVsnU3RhdGlvbkRpYW1ldGVyJ10sXG4gICAgICAgIGxpbmVXaWR0aDogaW5pWydMaW5lc1dpZHRoJ10sXG4gICAgICAgIHVwcGVyQ2FzZTogaW5pWydVcHBlckNhc2UnXSxcbiAgICAgICAgd29yZFdyYXA6IGluaVsnV29yZFdyYXAnXSxcbiAgICAgICAgaXNWZWN0b3I6IGluaVsnSXNWZWN0b3InXSxcbiAgICAgICAgdHJhbnNwb3J0czogUG16VXRpbHMuYXNBcnJheShpbmlbJ1RyYW5zcG9ydHMnXSksXG4gICAgICAgIGNoZWNrZWRUcmFuc3BvcnRzOiBQbXpVdGlscy5hc0FycmF5KGluaVsnQ2hlY2tlZFRyYW5zcG9ydHMnXSlcbiAgICB9O1xufVxuZnVuY3Rpb24gbG9hZFNwbGluZXMoaW5pKSB7XG4gICAgaWYgKCFpbmkpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICB2YXIgbGluZU5vZGVzID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIGluaSkge1xuICAgICAgICB2YXIgaXRlbSA9IGluaVtrZXldO1xuICAgICAgICB2YXIgc3BsaW5lID0gc3BsaW5lXzEuUG16U3BsaW5lLnBhcnNlKGl0ZW0pO1xuICAgICAgICBpZiAoIWxpbmVOb2Rlc1tzcGxpbmUubGluZV0pIHtcbiAgICAgICAgICAgIGxpbmVOb2Rlc1tzcGxpbmUubGluZV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lTm9kZXNbc3BsaW5lLmxpbmVdLnB1c2goc3BsaW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVOb2Rlcztcbn1cbmZ1bmN0aW9uIGxvYWRNYXBMaW5lcyhpbmksIGxpbmVOb2Rlcykge1xuICAgIHZhciBsaW5lcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBpbmkpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBpbmlba2V5XTtcbiAgICAgICAgbGluZXMucHVzaChuZXcgc2NoZW1lX2xpbmVfMS5QbXpTY2hlbWVMaW5lKGtleSwga2V5LCBjb2xvcl8xLlBtekNvbG9yLnBhcnNlKGl0ZW1bJ0NvbG9yJ10pLCBpdGVtWydMYWJlbHNDb2xvciddLCBpdGVtWydMYWJlbHNCQ29sb3InXSwgcG9pbnRfMS5QbXpQb2ludC5wYXJzZUFycmF5KGl0ZW1bJ0Nvb3JkaW5hdGVzJ10pLCByZWN0XzEuUG16UmVjdC5wYXJzZUFycmF5KGl0ZW1bJ1JlY3RzJ10pLCBQbXpVdGlscy5hc0Zsb2F0QXJyYXkoaXRlbVsnSGVpZ2h0cyddKSwgcmVjdF8xLlBtelJlY3QucGFyc2UoaXRlbVsnUmVjdCddKSwgcmVjdF8xLlBtelJlY3QucGFyc2VBcnJheShpdGVtWydSZWN0czInXSksIGxpbmVOb2Rlc1trZXldLCB0cnVlKSk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbn1cbmZ1bmN0aW9uIGZpbHRlckxpbmVTZWN0aW9ucyhpbmksIG1vZGVsKSB7XG4gICAgdmFyIGxpbmVOYW1lcyA9IFtdO1xuICAgIG1vZGVsLmdldFRyYW5zcG9ydHMoKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobGluZU5hbWVzLCBPYmplY3Qua2V5cyhtb2RlbC5nZXRUcmFuc3BvcnQoa2V5KS5saW5lcykpO1xuICAgIH0pO1xuICAgIHZhciBzZWN0aW9ucyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBpbmkpIHtcbiAgICAgICAgaWYgKGxpbmVOYW1lcy5pbmRleE9mKGtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICBzZWN0aW9uc1trZXldID0gaW5pW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlY3Rpb25zO1xufVxuZnVuY3Rpb24gbG9hZChpbmksIG5hbWUsIG1vZGVsKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBsb2FkTWFwT3B0aW9ucyhpbmlbJ09wdGlvbnMnXSk7XG4gICAgdmFyIHNwbGluZXMgPSBsb2FkU3BsaW5lcyhpbmlbJ0FkZGl0aW9uYWxOb2RlcyddKTtcbiAgICB2YXIgbGluZXMgPSBsb2FkTWFwTGluZXMoZmlsdGVyTGluZVNlY3Rpb25zKGluaSwgbW9kZWwpLCBzcGxpbmVzKTtcbiAgICByZXR1cm4gbmV3IHNjaGVtZV8xLlBtelNjaGVtZShuYW1lLCBuYW1lLCBvcHRpb25zLCBsaW5lcyk7XG59XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTtcbn1cbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5cbn0se1wiLi4vbW9kZWwvY29sb3JcIjozLFwiLi4vbW9kZWwvcG9pbnRcIjo2LFwiLi4vbW9kZWwvcmVjdFwiOjcsXCIuLi9tb2RlbC9zY2hlbWVcIjo5LFwiLi4vbW9kZWwvc2NoZW1lLWxpbmVcIjo4LFwiLi4vbW9kZWwvc3BsaW5lXCI6MTAsXCIuL3V0aWxzXCI6MTd9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciB0cmFuc3BvcnRfMSA9IHJlcXVpcmUoJy4uL21vZGVsL3RyYW5zcG9ydCcpO1xuZnVuY3Rpb24gbG9hZFRycE9wdGlvbnMoaW5pKSB7XG4gICAgcmV0dXJuIHRyYW5zcG9ydF8xLlBtelRyYW5zcG9ydFR5cGUuTWV0cm87IC8vIFRPRE86IGZpeCBpdFxufVxuZnVuY3Rpb24gbG9hZFRycExpbmVzKGNpdHlEZWxheXMsIGluaSkge1xuICAgIHZhciBsaW5lcyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBpbmkpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBpbmlba2V5XTtcbiAgICAgICAgdmFyIGRlbGF5cyA9IHt9O1xuICAgICAgICBpZiAoaXRlbVsnRGVsYXlzJ10pIHtcbiAgICAgICAgICAgIHZhciBkZWxheVZhbHVlcyA9IGl0ZW0uRGVsYXlzLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNpdHlEZWxheXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkZWxheXNbY2l0eURlbGF5c1tpXV0gPSBkZWxheVZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbVsnRGVsYXlEYXknXSkge1xuICAgICAgICAgICAgZGVsYXlzWydEYXknXSA9IGl0ZW0uRGVsYXlEYXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW1bJ0RlbGF5TmlnaHQnXSkge1xuICAgICAgICAgICAgZGVsYXlzWydOaWdodCddID0gaXRlbS5EZWxheU5pZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzW2l0ZW0uTmFtZV0gPSB7XG4gICAgICAgICAgICBzZWN0aW9uTmFtZToga2V5LFxuICAgICAgICAgICAgbGluZU1hcDogaXRlbVsnTGluZU1hcCddLFxuICAgICAgICAgICAgc3RhdGlvbnM6IGl0ZW1bJ1N0YXRpb25zJ10sXG4gICAgICAgICAgICBkcml2aW5nOiBpdGVtWydEcml2aW5nJ10sXG4gICAgICAgICAgICBkZWxheXM6IGRlbGF5c1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbGluZXM7XG59XG5mdW5jdGlvbiBsb2FkVHJwVHJhbnNmZXJzKGluaSkge1xuICAgIHJldHVybiBpbmk7XG59XG5mdW5jdGlvbiBmaWx0ZXJUcnBMaW5lU2VjdGlvbnMoaW5pKSB7XG4gICAgdmFyIHNlY3Rpb25zID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIGluaSkge1xuICAgICAgICBpZiAoWydPcHRpb25zJywgJ1RyYW5zZmVycycsICdBZGRpdGlvbmFsSW5mbyddLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNlY3Rpb25zW2tleV0gPSBpbmlba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VjdGlvbnM7XG59XG5mdW5jdGlvbiBsb2FkKGluaSwgbmFtZSwgbWV0YWRhdGEpIHtcbiAgICByZXR1cm4gbmV3IHRyYW5zcG9ydF8xLlBtelRyYW5zcG9ydChuYW1lLCBuYW1lLCBsb2FkVHJwT3B0aW9ucyhpbmlbJ09wdGlvbnMnXSB8fCB7fSksIGxvYWRUcnBMaW5lcyhtZXRhZGF0YS5kZWxheXMsIGZpbHRlclRycExpbmVTZWN0aW9ucyhpbmkpKSwgbG9hZFRycFRyYW5zZmVycyhpbmlbJ1RyYW5zZmVycyddIHx8IHt9KSk7XG59XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTtcbn1cbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5cbn0se1wiLi4vbW9kZWwvdHJhbnNwb3J0XCI6MTF9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy93aW5kb3dzLTEyNTEuZC50c1wiIC8+XG5cInVzZSBzdHJpY3RcIjtcbnZhciB3aW5kb3dzMTI1MSA9ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93Wyd3aW5kb3dzMTI1MSddIDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFsnd2luZG93czEyNTEnXSA6IG51bGwpO1xudmFyIGJhc2VfMSA9IHJlcXVpcmUoJy4uL21vZGVsL2Jhc2UnKTtcbmV4cG9ydHMuYXNJbnRBcnJheSA9IGJhc2VfMS5hc0ludEFycmF5O1xuZXhwb3J0cy5hc0Zsb2F0QXJyYXkgPSBiYXNlXzEuYXNGbG9hdEFycmF5O1xuZXhwb3J0cy5hc0FycmF5ID0gYmFzZV8xLmFzQXJyYXk7XG52YXIgY29uc3RhbnRzID0ge1xuICAgIERFRkFVTFRfTUFQX05BTUU6ICdNZXRyby5tYXAnLFxuICAgIERFRkFVTFRfVFJQX05BTUU6ICdNZXRyby50cnAnLFxuICAgIERFRkFVTFRfTElORV9DT0xPUjogJ2JsYWNrJ1xufTtcbmV4cG9ydHMuY29uc3RhbnRzID0gY29uc3RhbnRzO1xuZnVuY3Rpb24gZGVjb2RlV2luZG93czEyNTEoYnVmZmVyKSB7XG4gICAgdmFyIGJ5dGVTdHJpbmcgPSAnJztcbiAgICBidWZmZXIuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgICBieXRlU3RyaW5nID0gYnl0ZVN0cmluZyArIFN0cmluZy5mcm9tQ2hhckNvZGUoYik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHdpbmRvd3MxMjUxLmRlY29kZShieXRlU3RyaW5nLCB7ICdtb2RlJzogJ2ZhdGFsJyB9KTtcbn1cbmV4cG9ydHMuZGVjb2RlV2luZG93czEyNTEgPSBkZWNvZGVXaW5kb3dzMTI1MTtcbmZ1bmN0aW9uIGVuY29kZVdpbmRvd3MxMjUxKHRleHQpIHtcbiAgICB2YXIgYXNjaWlFbmNvZGVkVGV4dCA9IHdpbmRvd3MxMjUxLmVuY29kZSh0ZXh0KTtcbiAgICB2YXIgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYXNjaWlFbmNvZGVkVGV4dC5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXNjaWlFbmNvZGVkVGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICBidWZmZXJbaV0gPSBhc2NpaUVuY29kZWRUZXh0LmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBidWZmZXI7XG59XG5leHBvcnRzLmVuY29kZVdpbmRvd3MxMjUxID0gZW5jb2RlV2luZG93czEyNTE7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7XCIuLi9tb2RlbC9iYXNlXCI6Mn1dfSx7fSxbMV0pKDEpXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
